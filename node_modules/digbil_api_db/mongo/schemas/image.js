'use strict';

var oplogSchema = require('./oplog');

module.exports.load = function(mongoose) {
    var Schema = mongoose.Schema;
    return new Schema({
        ddate: Date,
        ts: Date,
        oplogs: [oplogSchema.create()],
        uri: String,
        file_key: String,
        md5: {
            type: String,
            trim: true
        },
        name: String,
        entity: {
            type: Schema.Types.ObjectId,
            ref: 'entities'
        },
        user: { // creator of the resource
            type: Schema.Types.ObjectId,
            ref: 'userprofile'
        },
        tags: [ {
            type: String,
            lowercase: true,
            trim: true,
            _id: false
        } ],

        thumb: {
            dim: String,
            uri: String,
            _id: false
        }

    });
};
