/**
 * @author Renaud Sauvain
 */

/**
 * Exports schema
 */
module.exports.load = function(mg) {
	var Schema = mg.Schema;

	var model = {
		'ts' : {
			type : Date,
			'default' : Date.now
		}, // <int, Timestamp of last update>,
		'type' : {
			type : String,
			enum : [ 'sys_notif', 'msg_notif' ]
		},
		'service' : {
			type : String,
			enum : [ 'UI', 'DS', 'Admin', 'All' ],
			'default' : 'UI'
		},
		"data" : {
			"from" : String,
			"prev" : String,
			"type" : {
				type : String
			},
			"msg" : String
		},
		'user' : {
			type : Schema.Types.ObjectId,// String,
			ref : 'userprofile',
			index : true
		}, // String <Mongo Object ID>
		'ack' : [ String ]
	// host which successfully handle the message
	};
	var schema = new Schema(model);

	return schema;
};
