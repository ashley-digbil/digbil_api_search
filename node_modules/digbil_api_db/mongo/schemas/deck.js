'use strict';

var oplogSchema = require('./oplog');

module.exports.load = function(mongoose) {
    var Schema = mongoose.Schema;
    return new Schema({
        ddate: Date,
        ts: Date,
        oplogs: [oplogSchema.create()],
        uri: String,
        md5: {
            type: String,
            trim: true
        },
        len: Number,
        size: Number,
        name: String,
        file_key: String, // aws s3 key
        wres: Number,
        hres: Number,
        entity: {
            type: Schema.Types.ObjectId,
            ref: 'entities'
        },
        user: { // creator of the resource
            type: Schema.Types.ObjectId,
            ref: 'userprofile'
        },
        tags: [ {
            type: String,
            lowercase: true,
            trim: true,
            _id: false
        } ],
        aspect_ratio: String,

        thumbs: [ {
            dim: String,
            uri: String,
            _id: false
        } ]

    });
}
