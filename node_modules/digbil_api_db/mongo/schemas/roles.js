/**
 * Exports schema
 */
module.exports.load = function(mg) {
	var Schema = mg.Schema;
	var schema = new Schema({
        "cdate" : {
            type : Date,
            'default' : Date.now
        },
        "ts" : {
            type : Date,
            'default' : Date.now
        },
        "path" : { 
            type : String,
        },
        "set_role" : {
            type : Boolean,
            'default' : false
        },
        "name" : { 
            type : String,
        },
        "code":{
            type : Number,
            'default' : 0,
        },
        "entity" : {
            type : Schema.Types.ObjectId,
            ref : "entities"
        },
        'desc' : {
            type : String,
            trim : true
        },
        "privileges" : [
            {
                "function" : {
                    type : String,
                    'default' : "",
                },
                "create" : {
                    type : Boolean,
                    "default" : false
                },
                "read" : {
                    type : Boolean,
                    "default" : false
                },
                "update" : {
                    type : Boolean,
                    "default" : false
                },
                "delete" : {
                    type : Boolean,
                    "default" : false
                },
                "filters" : [{
                    type : String
                }],
                "groups": {
                    type: [{
                        type: Schema.Types.ObjectId,
                        ref: 'groups'
                    }],
                    default: []
                },
            }
        ],
        "perms" : [{
            type : Schema.Types.ObjectId,
            ref : "permissions"
        }]
	});

	return schema;
};
